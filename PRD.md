# 图片水印工具产品需求文档 (PRD)

## 1. 项目概述
开发一款Windows端本地应用程序，用于为图片添加自定义文本水印，并提供可直接下载运行的exe文件。

## 2. 功能需求

### 2.1 文件处理

#### 2.1.1 导入图片
- 支持单张图片拖拽导入
- 支持通过文件选择器导入
- 显示已导入图片列表

#### 2.1.2 支持格式
- 输入格式：JPEG、PNG（必须支持透明通道）
- 输出格式：用户可选择输出为JPEG或PNG

#### 2.1.3 导出图片
- 用户可指定输出文件夹
- 默认禁止导出到原文件夹，防止覆盖原图
- 提供导出文件命名规则选项：
  - 保留原文件名
  - 添加自定义前缀（如 wm_）
  - 添加自定义后缀（如 _watermarked）

### 2.2 水印类型

#### 2.2.1 文本水印
- 支持用户自定义输入任意文本
- 支持调节文本透明度（范围：0-100%）

### 2.3 水印布局与样式

#### 2.3.1 实时预览
- 所有对水印的调整实时显示在主预览窗口
- 用户可点击图片列表切换预览不同图片

#### 2.3.2 位置调整
- 预设位置：提供九宫格布局（四角、正中心），用户可一键定位水印
- 手动拖拽：用户可直接在预览图上通过鼠标拖拽水印到任意位置

## 3. 系统架构

### 3.1 整体架构
- 前端界面：使用图形用户界面框架
- 图像处理核心：负责图片加载、水印添加和保存
- 文件管理：处理文件的导入导出操作

### 3.2 模块划分
1. UI模块：负责用户界面展示和交互
2. 图像处理模块：负责图片的读取、编辑和保存
3. 文件操作模块：负责文件的导入导出
4. 配置管理模块：保存用户设置

## 4. 界面设计

### 4.1 主界面布局
- 顶部：菜单栏（文件、设置、帮助等）
- 左侧：图片列表区域，显示已导入图片缩略图
- 中央：预览区域，显示当前选中图片及水印效果
- 右侧：控制面板，包含水印设置和导出选项

### 4.2 功能区设计

#### 4.2.1 文件操作区
- 导入按钮
- 导出按钮
- 导出设置选项

#### 4.2.2 水印设置区
- 文本输入框
- 透明度滑块
- 预设位置按钮组（九宫格）

#### 4.2.3 预览区
- 图片显示区域
- 可拖拽的水印文本元素

## 5. 技术选型

### 5.1 开发语言
- Python：易于开发图像处理应用，有丰富的第三方库支持

### 5.2 图形界面框架
- Tkinter：Python标准库，无需额外安装
- 或PyQt/PySide：功能更丰富的GUI框架

### 5.3 图像处理库
- PIL/Pillow：强大的图像处理库，支持各种格式和操作

### 5.4 打包工具
- PyInstaller：将Python应用打包为Windows可执行文件(.exe)

## 6. 开发计划

### 6.1 阶段一：基础框架搭建
- 开发环境配置
- 基础UI框架实现
- 图片导入功能

### 6.2 阶段二：核心功能开发
- 文本水印添加功能
- 实时预览功能
- 位置调整功能

### 6.3 阶段三：完善功能
- 导出功能及命名规则
- 透明度调节
- 界面优化

### 6.4 阶段四：测试与打包
- 功能测试
- 性能优化
- 打包为EXE文件

## 7. 系统要求

### 7.1 硬件要求
- 处理器：1GHz或更高
- 内存：至少1GB RAM
- 存储空间：至少100MB可用空间

### 7.2 软件要求
- 操作系统：Windows 7/8/10/11
- 无需安装额外运行时环境（打包时包含必要依赖）